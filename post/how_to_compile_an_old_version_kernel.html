<header>
    <title>How to compile an old version kernel</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="/lib/page.css">
    <style> html * { color: #f2f2f2 ; font-family: Terminus !important; } </style>
</header>

<body>
    <h1>>_ How to compile an old version kernel</h1>
<pre>
Compiling a linux kernel requires a matched version of gcc.
For example, the linux kernel v4.1 requires the gcc version between 3 and 5:

    linunx-v4.1 $ find . -name "compiler-gcc*.h"
    ./include/linux/compiler-gcc.h
    ./include/linux/compiler-gcc3.h
    ./include/linux/compiler-gcc4.h
    ./include/linux/compiler-gcc5.h

So how can we get the old version gcc?
You can always rely on <a href="https://buildroot.org/download.html">buildroot</a>

Just clone it's repository:

    git clone https://git.buildroot.net/buildroot

And switch to the specific old release you required.
You can check gcc release history from <a href="https://gcc.gnu.org/releases.html">here</a>

GCC5 is released in 2015, so we switch buildroot's release version to 2015.08.x :

    git switch 2015.08.x

And then, 

    make menuconfig
    # edit with yourself
    make

But an error occured in this step (this because we are using an old version of buildroot) :
<p style="color:crimson;">error "Please port gnulib freadahead.c to your platform!</p>
cd to /buildroot/output/build/host-m4-1.4.17 and excute :

    sed -i 's/IO_ftrylockfile/IO_EOF_SEEN/' lib/*.c
    echo "#define _IO_IN_BACKUP 0x100" >> lib/stdio-impl.h

Then type make again, we will get the old version of GCC we want.
Ready for compiling the old version linux kernel :)
</pre>

</body>